/*
 * FPGA_Driver.h
 *
 *  Created on: 3 Feb 2021
 *      Author: Pete.Mayes
 */

#ifndef DRIVERS_FPGA_DRIVER_H_
#define DRIVERS_FPGA_DRIVER_H_

#define FPGA_CURRENT_DEMAND_REGISTER				0
#define FPGA_PARAMETER_RAMP_RATE_REGISTER			1
#define FPGA_PARAMETER_P_GAIN_REGISTER				2
#define FPGA_PARAMETER_INTEGRAL_GAIN_REGISTER		3
#define FPGA_ESTIMATED_RESISTANCE_REGISTER			4
#define FPGA_CURRENT_OFFSET_REGISTER				5
#define FPGA_ESTIMATED_INDUCTANCE_REGISTER			6
#define FPGA_OUTPUT_VOLTAGE_LIMIT_REGISTER			7
#define FPGA_RASTOR_CURRENT_INCREMENT_REGISTER		8
#define FPGA_RASTOR_CURRENT_OFFSET_REGISTER			9
#define FPGA_CURRENT_SCALING_REGISTER				10
#define FPGA_CURRENT_CONTROL_REGISTER				11
#define FPGA_VOLTAGE_DEMAND_REGISTER				12

#define FPGA_REGISTERS_PER_CONTROLLER				16



#define STATUS_FLAGS_TOGGLE_BIT								0x0001  // bit 0
#define STATUS_FLAGS_MOTOR_DEENERGISED						0x0002  // bit 1
#define STATUS_FLAGS_MOTOR_ENERGISED						0x0004  // bit 2
#define	STATUS_FLAGS_COAST_BIT								0x0008  // bit 3
#define STATUS_FLAGS_FAULT_PRESENT							0x0010  // bit 4
#define STATUS_FLAGS_FPGA_FAULT_RESET						0x0020	// bit 5
#define STATUS_HARDWARE_DAC_OPTION							0x0040	// bit 6
#define STATUS_INTEGRATOR_ENABLE_FLAG						0x0080	// bit 7
#define STATUS_ENABLE_MEMORY_CAPTURE_FLAG					0x0100	// bit 8
#define	STATUS_HARDWARE_MUX_0								0x0200  // 256 9
#define	STATUS_HARDWARE_MUX_1								0x0400  // 512 10

#define FAULT_FLAG_1					0x00000001 	// 1
#define FAULT_FLAG_2					0x00000002 	// 2
#define FAULT_FLAG_3					0x00000004 	// 4
#define FAULT_FLAG_4					0x00000008 	// 8
#define FAULT_FLAG_5					0x00000010 	// 16
#define FAULT_FLAG_6					0x00000020 	// 32
#define FAULT_FLAG_7					0x00000040	// 64
#define FAULT_FLAG_8					0x00000080	// 128
#define FAULT_FLAG_9					0x00000100  // 256
#define FAULT_FLAG_10					0x00000200  // 512
#define FAULT_FLAG_11					0x00000400  // 1024
#define FAULT_FLAG_12					0x00000800  // 2048
#define FAULT_FLAG_13					0x00001000  // 4096
#define FAULT_FLAG_14					0x00002000
#define FAULT_FLAG_15					0x00004000
#define FAULT_FLAG_16					0x00008000
#define FAULT_FLAG_17					0x00010000
#define FAULT_FLAG_18					0x00020000
#define FAULT_FLAG_19					0x00040000
#define FAULT_FLAG_20					0x00080000
#define FAULT_FLAG_21					0x00100000
#define FAULT_FLAG_22					0x00200000
#define FAULT_FLAG_23					0x00400000
#define FAULT_FLAG_24					0x00800000
#define FAULT_FLAG_25					0x01000000
#define FAULT_FLAG_26					0x02000000
#define FAULT_FLAG_27					0x04000000
#define FAULT_FLAG_28					0x08000000
#define FAULT_FLAG_29					0x10000000
#define FAULT_FLAG_30					0x20000000
#define FAULT_FLAG_31					0x40000000
#define FAULT_FLAG_32					0x80000000



extern Uint32 CheckForFPGAFaultFlags(ControlModuleDataStruc* ptr2data);



#endif /* DRIVERS_FPGA_DRIVER_H_ */
